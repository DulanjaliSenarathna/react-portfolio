{"ast":null,"code":"import $ from '../../shared/dom.js';\nimport classesToSelector from '../../shared/classes-to-selector.js';\nimport createElementIfNotDefined from '../../shared/create-element-if-not-defined.js';\nexport default function Pagination(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const pfx = 'swiper-pagination';\n  extendParams({\n    pagination: {\n      el: null,\n      bulletElement: 'span',\n      clickable: false,\n      hideOnClick: false,\n      renderBullet: null,\n      renderProgressbar: null,\n      renderFraction: null,\n      renderCustom: null,\n      progressbarOpposite: false,\n      type: 'bullets',\n      // 'bullets' or 'progressbar' or 'fraction' or 'custom'\n      dynamicBullets: false,\n      dynamicMainBullets: 1,\n      formatFractionCurrent: number => number,\n      formatFractionTotal: number => number,\n      bulletClass: `${pfx}-bullet`,\n      bulletActiveClass: `${pfx}-bullet-active`,\n      modifierClass: `${pfx}-`,\n      currentClass: `${pfx}-current`,\n      totalClass: `${pfx}-total`,\n      hiddenClass: `${pfx}-hidden`,\n      progressbarFillClass: `${pfx}-progressbar-fill`,\n      progressbarOppositeClass: `${pfx}-progressbar-opposite`,\n      clickableClass: `${pfx}-clickable`,\n      lockClass: `${pfx}-lock`,\n      horizontalClass: `${pfx}-horizontal`,\n      verticalClass: `${pfx}-vertical`,\n      paginationDisabledClass: `${pfx}-disabled`\n    }\n  });\n  swiper.pagination = {\n    el: null,\n    $el: null,\n    bullets: []\n  };\n  let bulletSize;\n  let dynamicBulletIndex = 0;\n\n  function isPaginationDisabled() {\n    return !swiper.params.pagination.el || !swiper.pagination.el || !swiper.pagination.$el || swiper.pagination.$el.length === 0;\n  }\n\n  function setSideBullets($bulletEl, position) {\n    const {\n      bulletActiveClass\n    } = swiper.params.pagination;\n    $bulletEl[position]().addClass(`${bulletActiveClass}-${position}`)[position]().addClass(`${bulletActiveClass}-${position}-${position}`);\n  }\n\n  function update() {\n    // Render || Update Pagination bullets/items\n    const rtl = swiper.rtl;\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const slidesLength = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.slides.length : swiper.slides.length;\n    const $el = swiper.pagination.$el; // Current/Total\n\n    let current;\n    const total = swiper.params.loop ? Math.ceil((slidesLength - swiper.loopedSlides * 2) / swiper.params.slidesPerGroup) : swiper.snapGrid.length;\n\n    if (swiper.params.loop) {\n      current = Math.ceil((swiper.activeIndex - swiper.loopedSlides) / swiper.params.slidesPerGroup);\n\n      if (current > slidesLength - 1 - swiper.loopedSlides * 2) {\n        current -= slidesLength - swiper.loopedSlides * 2;\n      }\n\n      if (current > total - 1) current -= total;\n      if (current < 0 && swiper.params.paginationType !== 'bullets') current = total + current;\n    } else if (typeof swiper.snapIndex !== 'undefined') {\n      current = swiper.snapIndex;\n    } else {\n      current = swiper.activeIndex || 0;\n    } // Types\n\n\n    if (params.type === 'bullets' && swiper.pagination.bullets && swiper.pagination.bullets.length > 0) {\n      const bullets = swiper.pagination.bullets;\n      let firstIndex;\n      let lastIndex;\n      let midIndex;\n\n      if (params.dynamicBullets) {\n        bulletSize = bullets.eq(0)[swiper.isHorizontal() ? 'outerWidth' : 'outerHeight'](true);\n        $el.css(swiper.isHorizontal() ? 'width' : 'height', `${bulletSize * (params.dynamicMainBullets + 4)}px`);\n\n        if (params.dynamicMainBullets > 1 && swiper.previousIndex !== undefined) {\n          dynamicBulletIndex += current - (swiper.previousIndex - swiper.loopedSlides || 0);\n\n          if (dynamicBulletIndex > params.dynamicMainBullets - 1) {\n            dynamicBulletIndex = params.dynamicMainBullets - 1;\n          } else if (dynamicBulletIndex < 0) {\n            dynamicBulletIndex = 0;\n          }\n        }\n\n        firstIndex = Math.max(current - dynamicBulletIndex, 0);\n        lastIndex = firstIndex + (Math.min(bullets.length, params.dynamicMainBullets) - 1);\n        midIndex = (lastIndex + firstIndex) / 2;\n      }\n\n      bullets.removeClass(['', '-next', '-next-next', '-prev', '-prev-prev', '-main'].map(suffix => `${params.bulletActiveClass}${suffix}`).join(' '));\n\n      if ($el.length > 1) {\n        bullets.each(bullet => {\n          const $bullet = $(bullet);\n          const bulletIndex = $bullet.index();\n\n          if (bulletIndex === current) {\n            $bullet.addClass(params.bulletActiveClass);\n          }\n\n          if (params.dynamicBullets) {\n            if (bulletIndex >= firstIndex && bulletIndex <= lastIndex) {\n              $bullet.addClass(`${params.bulletActiveClass}-main`);\n            }\n\n            if (bulletIndex === firstIndex) {\n              setSideBullets($bullet, 'prev');\n            }\n\n            if (bulletIndex === lastIndex) {\n              setSideBullets($bullet, 'next');\n            }\n          }\n        });\n      } else {\n        const $bullet = bullets.eq(current);\n        const bulletIndex = $bullet.index();\n        $bullet.addClass(params.bulletActiveClass);\n\n        if (params.dynamicBullets) {\n          const $firstDisplayedBullet = bullets.eq(firstIndex);\n          const $lastDisplayedBullet = bullets.eq(lastIndex);\n\n          for (let i = firstIndex; i <= lastIndex; i += 1) {\n            bullets.eq(i).addClass(`${params.bulletActiveClass}-main`);\n          }\n\n          if (swiper.params.loop) {\n            if (bulletIndex >= bullets.length) {\n              for (let i = params.dynamicMainBullets; i >= 0; i -= 1) {\n                bullets.eq(bullets.length - i).addClass(`${params.bulletActiveClass}-main`);\n              }\n\n              bullets.eq(bullets.length - params.dynamicMainBullets - 1).addClass(`${params.bulletActiveClass}-prev`);\n            } else {\n              setSideBullets($firstDisplayedBullet, 'prev');\n              setSideBullets($lastDisplayedBullet, 'next');\n            }\n          } else {\n            setSideBullets($firstDisplayedBullet, 'prev');\n            setSideBullets($lastDisplayedBullet, 'next');\n          }\n        }\n      }\n\n      if (params.dynamicBullets) {\n        const dynamicBulletsLength = Math.min(bullets.length, params.dynamicMainBullets + 4);\n        const bulletsOffset = (bulletSize * dynamicBulletsLength - bulletSize) / 2 - midIndex * bulletSize;\n        const offsetProp = rtl ? 'right' : 'left';\n        bullets.css(swiper.isHorizontal() ? offsetProp : 'top', `${bulletsOffset}px`);\n      }\n    }\n\n    if (params.type === 'fraction') {\n      $el.find(classesToSelector(params.currentClass)).text(params.formatFractionCurrent(current + 1));\n      $el.find(classesToSelector(params.totalClass)).text(params.formatFractionTotal(total));\n    }\n\n    if (params.type === 'progressbar') {\n      let progressbarDirection;\n\n      if (params.progressbarOpposite) {\n        progressbarDirection = swiper.isHorizontal() ? 'vertical' : 'horizontal';\n      } else {\n        progressbarDirection = swiper.isHorizontal() ? 'horizontal' : 'vertical';\n      }\n\n      const scale = (current + 1) / total;\n      let scaleX = 1;\n      let scaleY = 1;\n\n      if (progressbarDirection === 'horizontal') {\n        scaleX = scale;\n      } else {\n        scaleY = scale;\n      }\n\n      $el.find(classesToSelector(params.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${scaleX}) scaleY(${scaleY})`).transition(swiper.params.speed);\n    }\n\n    if (params.type === 'custom' && params.renderCustom) {\n      $el.html(params.renderCustom(swiper, current + 1, total));\n      emit('paginationRender', $el[0]);\n    } else {\n      emit('paginationUpdate', $el[0]);\n    }\n\n    if (swiper.params.watchOverflow && swiper.enabled) {\n      $el[swiper.isLocked ? 'addClass' : 'removeClass'](params.lockClass);\n    }\n  }\n\n  function render() {\n    // Render Container\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const slidesLength = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.slides.length : swiper.slides.length;\n    const $el = swiper.pagination.$el;\n    let paginationHTML = '';\n\n    if (params.type === 'bullets') {\n      let numberOfBullets = swiper.params.loop ? Math.ceil((slidesLength - swiper.loopedSlides * 2) / swiper.params.slidesPerGroup) : swiper.snapGrid.length;\n\n      if (swiper.params.freeMode && swiper.params.freeMode.enabled && !swiper.params.loop && numberOfBullets > slidesLength) {\n        numberOfBullets = slidesLength;\n      }\n\n      for (let i = 0; i < numberOfBullets; i += 1) {\n        if (params.renderBullet) {\n          paginationHTML += params.renderBullet.call(swiper, i, params.bulletClass);\n        } else {\n          paginationHTML += `<${params.bulletElement} class=\"${params.bulletClass}\"></${params.bulletElement}>`;\n        }\n      }\n\n      $el.html(paginationHTML);\n      swiper.pagination.bullets = $el.find(classesToSelector(params.bulletClass));\n    }\n\n    if (params.type === 'fraction') {\n      if (params.renderFraction) {\n        paginationHTML = params.renderFraction.call(swiper, params.currentClass, params.totalClass);\n      } else {\n        paginationHTML = `<span class=\"${params.currentClass}\"></span>` + ' / ' + `<span class=\"${params.totalClass}\"></span>`;\n      }\n\n      $el.html(paginationHTML);\n    }\n\n    if (params.type === 'progressbar') {\n      if (params.renderProgressbar) {\n        paginationHTML = params.renderProgressbar.call(swiper, params.progressbarFillClass);\n      } else {\n        paginationHTML = `<span class=\"${params.progressbarFillClass}\"></span>`;\n      }\n\n      $el.html(paginationHTML);\n    }\n\n    if (params.type !== 'custom') {\n      emit('paginationRender', swiper.pagination.$el[0]);\n    }\n  }\n\n  function init() {\n    swiper.params.pagination = createElementIfNotDefined(swiper, swiper.originalParams.pagination, swiper.params.pagination, {\n      el: 'swiper-pagination'\n    });\n    const params = swiper.params.pagination;\n    if (!params.el) return;\n    let $el = $(params.el);\n    if ($el.length === 0) return;\n\n    if (swiper.params.uniqueNavElements && typeof params.el === 'string' && $el.length > 1) {\n      $el = swiper.$el.find(params.el); // check if it belongs to another nested Swiper\n\n      if ($el.length > 1) {\n        $el = $el.filter(el => {\n          if ($(el).parents('.swiper')[0] !== swiper.el) return false;\n          return true;\n        });\n      }\n    }\n\n    if (params.type === 'bullets' && params.clickable) {\n      $el.addClass(params.clickableClass);\n    }\n\n    $el.addClass(params.modifierClass + params.type);\n    $el.addClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n\n    if (params.type === 'bullets' && params.dynamicBullets) {\n      $el.addClass(`${params.modifierClass}${params.type}-dynamic`);\n      dynamicBulletIndex = 0;\n\n      if (params.dynamicMainBullets < 1) {\n        params.dynamicMainBullets = 1;\n      }\n    }\n\n    if (params.type === 'progressbar' && params.progressbarOpposite) {\n      $el.addClass(params.progressbarOppositeClass);\n    }\n\n    if (params.clickable) {\n      $el.on('click', classesToSelector(params.bulletClass), function onClick(e) {\n        e.preventDefault();\n        let index = $(this).index() * swiper.params.slidesPerGroup;\n        if (swiper.params.loop) index += swiper.loopedSlides;\n        swiper.slideTo(index);\n      });\n    }\n\n    Object.assign(swiper.pagination, {\n      $el,\n      el: $el[0]\n    });\n\n    if (!swiper.enabled) {\n      $el.addClass(params.lockClass);\n    }\n  }\n\n  function destroy() {\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const $el = swiper.pagination.$el;\n    $el.removeClass(params.hiddenClass);\n    $el.removeClass(params.modifierClass + params.type);\n    $el.removeClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n    if (swiper.pagination.bullets && swiper.pagination.bullets.removeClass) swiper.pagination.bullets.removeClass(params.bulletActiveClass);\n\n    if (params.clickable) {\n      $el.off('click', classesToSelector(params.bulletClass));\n    }\n  }\n\n  on('init', () => {\n    if (swiper.params.pagination.enabled === false) {\n      // eslint-disable-next-line\n      disable();\n    } else {\n      init();\n      render();\n      update();\n    }\n  });\n  on('activeIndexChange', () => {\n    if (swiper.params.loop) {\n      update();\n    } else if (typeof swiper.snapIndex === 'undefined') {\n      update();\n    }\n  });\n  on('snapIndexChange', () => {\n    if (!swiper.params.loop) {\n      update();\n    }\n  });\n  on('slidesLengthChange', () => {\n    if (swiper.params.loop) {\n      render();\n      update();\n    }\n  });\n  on('snapGridLengthChange', () => {\n    if (!swiper.params.loop) {\n      render();\n      update();\n    }\n  });\n  on('destroy', () => {\n    destroy();\n  });\n  on('enable disable', () => {\n    const {\n      $el\n    } = swiper.pagination;\n\n    if ($el) {\n      $el[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.pagination.lockClass);\n    }\n  });\n  on('lock unlock', () => {\n    update();\n  });\n  on('click', (_s, e) => {\n    const targetEl = e.target;\n    const {\n      $el\n    } = swiper.pagination;\n\n    if (swiper.params.pagination.el && swiper.params.pagination.hideOnClick && $el && $el.length > 0 && !$(targetEl).hasClass(swiper.params.pagination.bulletClass)) {\n      if (swiper.navigation && (swiper.navigation.nextEl && targetEl === swiper.navigation.nextEl || swiper.navigation.prevEl && targetEl === swiper.navigation.prevEl)) return;\n      const isHidden = $el.hasClass(swiper.params.pagination.hiddenClass);\n\n      if (isHidden === true) {\n        emit('paginationShow');\n      } else {\n        emit('paginationHide');\n      }\n\n      $el.toggleClass(swiper.params.pagination.hiddenClass);\n    }\n  });\n\n  const enable = () => {\n    swiper.$el.removeClass(swiper.params.pagination.paginationDisabledClass);\n\n    if (swiper.pagination.$el) {\n      swiper.pagination.$el.removeClass(swiper.params.pagination.paginationDisabledClass);\n    }\n\n    init();\n    render();\n    update();\n  };\n\n  const disable = () => {\n    swiper.$el.addClass(swiper.params.pagination.paginationDisabledClass);\n\n    if (swiper.pagination.$el) {\n      swiper.pagination.$el.addClass(swiper.params.pagination.paginationDisabledClass);\n    }\n\n    destroy();\n  };\n\n  Object.assign(swiper.pagination, {\n    enable,\n    disable,\n    render,\n    update,\n    init,\n    destroy\n  });\n}","map":{"version":3,"sources":["D:/Projects/react-portfolio/node_modules/swiper/modules/pagination/pagination.js"],"names":["$","classesToSelector","createElementIfNotDefined","Pagination","_ref","swiper","extendParams","on","emit","pfx","pagination","el","bulletElement","clickable","hideOnClick","renderBullet","renderProgressbar","renderFraction","renderCustom","progressbarOpposite","type","dynamicBullets","dynamicMainBullets","formatFractionCurrent","number","formatFractionTotal","bulletClass","bulletActiveClass","modifierClass","currentClass","totalClass","hiddenClass","progressbarFillClass","progressbarOppositeClass","clickableClass","lockClass","horizontalClass","verticalClass","paginationDisabledClass","$el","bullets","bulletSize","dynamicBulletIndex","isPaginationDisabled","params","length","setSideBullets","$bulletEl","position","addClass","update","rtl","slidesLength","virtual","enabled","slides","current","total","loop","Math","ceil","loopedSlides","slidesPerGroup","snapGrid","activeIndex","paginationType","snapIndex","firstIndex","lastIndex","midIndex","eq","isHorizontal","css","previousIndex","undefined","max","min","removeClass","map","suffix","join","each","bullet","$bullet","bulletIndex","index","$firstDisplayedBullet","$lastDisplayedBullet","i","dynamicBulletsLength","bulletsOffset","offsetProp","find","text","progressbarDirection","scale","scaleX","scaleY","transform","transition","speed","html","watchOverflow","isLocked","render","paginationHTML","numberOfBullets","freeMode","call","init","originalParams","uniqueNavElements","filter","parents","onClick","e","preventDefault","slideTo","Object","assign","destroy","off","disable","_s","targetEl","target","hasClass","navigation","nextEl","prevEl","isHidden","toggleClass","enable"],"mappings":"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","sourcesContent":["import $ from '../../shared/dom.js';\nimport classesToSelector from '../../shared/classes-to-selector.js';\nimport createElementIfNotDefined from '../../shared/create-element-if-not-defined.js';\nexport default function Pagination(_ref) {\n  let {\n    swiper,\n    extendParams,\n    on,\n    emit\n  } = _ref;\n  const pfx = 'swiper-pagination';\n  extendParams({\n    pagination: {\n      el: null,\n      bulletElement: 'span',\n      clickable: false,\n      hideOnClick: false,\n      renderBullet: null,\n      renderProgressbar: null,\n      renderFraction: null,\n      renderCustom: null,\n      progressbarOpposite: false,\n      type: 'bullets',\n      // 'bullets' or 'progressbar' or 'fraction' or 'custom'\n      dynamicBullets: false,\n      dynamicMainBullets: 1,\n      formatFractionCurrent: number => number,\n      formatFractionTotal: number => number,\n      bulletClass: `${pfx}-bullet`,\n      bulletActiveClass: `${pfx}-bullet-active`,\n      modifierClass: `${pfx}-`,\n      currentClass: `${pfx}-current`,\n      totalClass: `${pfx}-total`,\n      hiddenClass: `${pfx}-hidden`,\n      progressbarFillClass: `${pfx}-progressbar-fill`,\n      progressbarOppositeClass: `${pfx}-progressbar-opposite`,\n      clickableClass: `${pfx}-clickable`,\n      lockClass: `${pfx}-lock`,\n      horizontalClass: `${pfx}-horizontal`,\n      verticalClass: `${pfx}-vertical`,\n      paginationDisabledClass: `${pfx}-disabled`\n    }\n  });\n  swiper.pagination = {\n    el: null,\n    $el: null,\n    bullets: []\n  };\n  let bulletSize;\n  let dynamicBulletIndex = 0;\n\n  function isPaginationDisabled() {\n    return !swiper.params.pagination.el || !swiper.pagination.el || !swiper.pagination.$el || swiper.pagination.$el.length === 0;\n  }\n\n  function setSideBullets($bulletEl, position) {\n    const {\n      bulletActiveClass\n    } = swiper.params.pagination;\n    $bulletEl[position]().addClass(`${bulletActiveClass}-${position}`)[position]().addClass(`${bulletActiveClass}-${position}-${position}`);\n  }\n\n  function update() {\n    // Render || Update Pagination bullets/items\n    const rtl = swiper.rtl;\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const slidesLength = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.slides.length : swiper.slides.length;\n    const $el = swiper.pagination.$el; // Current/Total\n\n    let current;\n    const total = swiper.params.loop ? Math.ceil((slidesLength - swiper.loopedSlides * 2) / swiper.params.slidesPerGroup) : swiper.snapGrid.length;\n\n    if (swiper.params.loop) {\n      current = Math.ceil((swiper.activeIndex - swiper.loopedSlides) / swiper.params.slidesPerGroup);\n\n      if (current > slidesLength - 1 - swiper.loopedSlides * 2) {\n        current -= slidesLength - swiper.loopedSlides * 2;\n      }\n\n      if (current > total - 1) current -= total;\n      if (current < 0 && swiper.params.paginationType !== 'bullets') current = total + current;\n    } else if (typeof swiper.snapIndex !== 'undefined') {\n      current = swiper.snapIndex;\n    } else {\n      current = swiper.activeIndex || 0;\n    } // Types\n\n\n    if (params.type === 'bullets' && swiper.pagination.bullets && swiper.pagination.bullets.length > 0) {\n      const bullets = swiper.pagination.bullets;\n      let firstIndex;\n      let lastIndex;\n      let midIndex;\n\n      if (params.dynamicBullets) {\n        bulletSize = bullets.eq(0)[swiper.isHorizontal() ? 'outerWidth' : 'outerHeight'](true);\n        $el.css(swiper.isHorizontal() ? 'width' : 'height', `${bulletSize * (params.dynamicMainBullets + 4)}px`);\n\n        if (params.dynamicMainBullets > 1 && swiper.previousIndex !== undefined) {\n          dynamicBulletIndex += current - (swiper.previousIndex - swiper.loopedSlides || 0);\n\n          if (dynamicBulletIndex > params.dynamicMainBullets - 1) {\n            dynamicBulletIndex = params.dynamicMainBullets - 1;\n          } else if (dynamicBulletIndex < 0) {\n            dynamicBulletIndex = 0;\n          }\n        }\n\n        firstIndex = Math.max(current - dynamicBulletIndex, 0);\n        lastIndex = firstIndex + (Math.min(bullets.length, params.dynamicMainBullets) - 1);\n        midIndex = (lastIndex + firstIndex) / 2;\n      }\n\n      bullets.removeClass(['', '-next', '-next-next', '-prev', '-prev-prev', '-main'].map(suffix => `${params.bulletActiveClass}${suffix}`).join(' '));\n\n      if ($el.length > 1) {\n        bullets.each(bullet => {\n          const $bullet = $(bullet);\n          const bulletIndex = $bullet.index();\n\n          if (bulletIndex === current) {\n            $bullet.addClass(params.bulletActiveClass);\n          }\n\n          if (params.dynamicBullets) {\n            if (bulletIndex >= firstIndex && bulletIndex <= lastIndex) {\n              $bullet.addClass(`${params.bulletActiveClass}-main`);\n            }\n\n            if (bulletIndex === firstIndex) {\n              setSideBullets($bullet, 'prev');\n            }\n\n            if (bulletIndex === lastIndex) {\n              setSideBullets($bullet, 'next');\n            }\n          }\n        });\n      } else {\n        const $bullet = bullets.eq(current);\n        const bulletIndex = $bullet.index();\n        $bullet.addClass(params.bulletActiveClass);\n\n        if (params.dynamicBullets) {\n          const $firstDisplayedBullet = bullets.eq(firstIndex);\n          const $lastDisplayedBullet = bullets.eq(lastIndex);\n\n          for (let i = firstIndex; i <= lastIndex; i += 1) {\n            bullets.eq(i).addClass(`${params.bulletActiveClass}-main`);\n          }\n\n          if (swiper.params.loop) {\n            if (bulletIndex >= bullets.length) {\n              for (let i = params.dynamicMainBullets; i >= 0; i -= 1) {\n                bullets.eq(bullets.length - i).addClass(`${params.bulletActiveClass}-main`);\n              }\n\n              bullets.eq(bullets.length - params.dynamicMainBullets - 1).addClass(`${params.bulletActiveClass}-prev`);\n            } else {\n              setSideBullets($firstDisplayedBullet, 'prev');\n              setSideBullets($lastDisplayedBullet, 'next');\n            }\n          } else {\n            setSideBullets($firstDisplayedBullet, 'prev');\n            setSideBullets($lastDisplayedBullet, 'next');\n          }\n        }\n      }\n\n      if (params.dynamicBullets) {\n        const dynamicBulletsLength = Math.min(bullets.length, params.dynamicMainBullets + 4);\n        const bulletsOffset = (bulletSize * dynamicBulletsLength - bulletSize) / 2 - midIndex * bulletSize;\n        const offsetProp = rtl ? 'right' : 'left';\n        bullets.css(swiper.isHorizontal() ? offsetProp : 'top', `${bulletsOffset}px`);\n      }\n    }\n\n    if (params.type === 'fraction') {\n      $el.find(classesToSelector(params.currentClass)).text(params.formatFractionCurrent(current + 1));\n      $el.find(classesToSelector(params.totalClass)).text(params.formatFractionTotal(total));\n    }\n\n    if (params.type === 'progressbar') {\n      let progressbarDirection;\n\n      if (params.progressbarOpposite) {\n        progressbarDirection = swiper.isHorizontal() ? 'vertical' : 'horizontal';\n      } else {\n        progressbarDirection = swiper.isHorizontal() ? 'horizontal' : 'vertical';\n      }\n\n      const scale = (current + 1) / total;\n      let scaleX = 1;\n      let scaleY = 1;\n\n      if (progressbarDirection === 'horizontal') {\n        scaleX = scale;\n      } else {\n        scaleY = scale;\n      }\n\n      $el.find(classesToSelector(params.progressbarFillClass)).transform(`translate3d(0,0,0) scaleX(${scaleX}) scaleY(${scaleY})`).transition(swiper.params.speed);\n    }\n\n    if (params.type === 'custom' && params.renderCustom) {\n      $el.html(params.renderCustom(swiper, current + 1, total));\n      emit('paginationRender', $el[0]);\n    } else {\n      emit('paginationUpdate', $el[0]);\n    }\n\n    if (swiper.params.watchOverflow && swiper.enabled) {\n      $el[swiper.isLocked ? 'addClass' : 'removeClass'](params.lockClass);\n    }\n  }\n\n  function render() {\n    // Render Container\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const slidesLength = swiper.virtual && swiper.params.virtual.enabled ? swiper.virtual.slides.length : swiper.slides.length;\n    const $el = swiper.pagination.$el;\n    let paginationHTML = '';\n\n    if (params.type === 'bullets') {\n      let numberOfBullets = swiper.params.loop ? Math.ceil((slidesLength - swiper.loopedSlides * 2) / swiper.params.slidesPerGroup) : swiper.snapGrid.length;\n\n      if (swiper.params.freeMode && swiper.params.freeMode.enabled && !swiper.params.loop && numberOfBullets > slidesLength) {\n        numberOfBullets = slidesLength;\n      }\n\n      for (let i = 0; i < numberOfBullets; i += 1) {\n        if (params.renderBullet) {\n          paginationHTML += params.renderBullet.call(swiper, i, params.bulletClass);\n        } else {\n          paginationHTML += `<${params.bulletElement} class=\"${params.bulletClass}\"></${params.bulletElement}>`;\n        }\n      }\n\n      $el.html(paginationHTML);\n      swiper.pagination.bullets = $el.find(classesToSelector(params.bulletClass));\n    }\n\n    if (params.type === 'fraction') {\n      if (params.renderFraction) {\n        paginationHTML = params.renderFraction.call(swiper, params.currentClass, params.totalClass);\n      } else {\n        paginationHTML = `<span class=\"${params.currentClass}\"></span>` + ' / ' + `<span class=\"${params.totalClass}\"></span>`;\n      }\n\n      $el.html(paginationHTML);\n    }\n\n    if (params.type === 'progressbar') {\n      if (params.renderProgressbar) {\n        paginationHTML = params.renderProgressbar.call(swiper, params.progressbarFillClass);\n      } else {\n        paginationHTML = `<span class=\"${params.progressbarFillClass}\"></span>`;\n      }\n\n      $el.html(paginationHTML);\n    }\n\n    if (params.type !== 'custom') {\n      emit('paginationRender', swiper.pagination.$el[0]);\n    }\n  }\n\n  function init() {\n    swiper.params.pagination = createElementIfNotDefined(swiper, swiper.originalParams.pagination, swiper.params.pagination, {\n      el: 'swiper-pagination'\n    });\n    const params = swiper.params.pagination;\n    if (!params.el) return;\n    let $el = $(params.el);\n    if ($el.length === 0) return;\n\n    if (swiper.params.uniqueNavElements && typeof params.el === 'string' && $el.length > 1) {\n      $el = swiper.$el.find(params.el); // check if it belongs to another nested Swiper\n\n      if ($el.length > 1) {\n        $el = $el.filter(el => {\n          if ($(el).parents('.swiper')[0] !== swiper.el) return false;\n          return true;\n        });\n      }\n    }\n\n    if (params.type === 'bullets' && params.clickable) {\n      $el.addClass(params.clickableClass);\n    }\n\n    $el.addClass(params.modifierClass + params.type);\n    $el.addClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n\n    if (params.type === 'bullets' && params.dynamicBullets) {\n      $el.addClass(`${params.modifierClass}${params.type}-dynamic`);\n      dynamicBulletIndex = 0;\n\n      if (params.dynamicMainBullets < 1) {\n        params.dynamicMainBullets = 1;\n      }\n    }\n\n    if (params.type === 'progressbar' && params.progressbarOpposite) {\n      $el.addClass(params.progressbarOppositeClass);\n    }\n\n    if (params.clickable) {\n      $el.on('click', classesToSelector(params.bulletClass), function onClick(e) {\n        e.preventDefault();\n        let index = $(this).index() * swiper.params.slidesPerGroup;\n        if (swiper.params.loop) index += swiper.loopedSlides;\n        swiper.slideTo(index);\n      });\n    }\n\n    Object.assign(swiper.pagination, {\n      $el,\n      el: $el[0]\n    });\n\n    if (!swiper.enabled) {\n      $el.addClass(params.lockClass);\n    }\n  }\n\n  function destroy() {\n    const params = swiper.params.pagination;\n    if (isPaginationDisabled()) return;\n    const $el = swiper.pagination.$el;\n    $el.removeClass(params.hiddenClass);\n    $el.removeClass(params.modifierClass + params.type);\n    $el.removeClass(swiper.isHorizontal() ? params.horizontalClass : params.verticalClass);\n    if (swiper.pagination.bullets && swiper.pagination.bullets.removeClass) swiper.pagination.bullets.removeClass(params.bulletActiveClass);\n\n    if (params.clickable) {\n      $el.off('click', classesToSelector(params.bulletClass));\n    }\n  }\n\n  on('init', () => {\n    if (swiper.params.pagination.enabled === false) {\n      // eslint-disable-next-line\n      disable();\n    } else {\n      init();\n      render();\n      update();\n    }\n  });\n  on('activeIndexChange', () => {\n    if (swiper.params.loop) {\n      update();\n    } else if (typeof swiper.snapIndex === 'undefined') {\n      update();\n    }\n  });\n  on('snapIndexChange', () => {\n    if (!swiper.params.loop) {\n      update();\n    }\n  });\n  on('slidesLengthChange', () => {\n    if (swiper.params.loop) {\n      render();\n      update();\n    }\n  });\n  on('snapGridLengthChange', () => {\n    if (!swiper.params.loop) {\n      render();\n      update();\n    }\n  });\n  on('destroy', () => {\n    destroy();\n  });\n  on('enable disable', () => {\n    const {\n      $el\n    } = swiper.pagination;\n\n    if ($el) {\n      $el[swiper.enabled ? 'removeClass' : 'addClass'](swiper.params.pagination.lockClass);\n    }\n  });\n  on('lock unlock', () => {\n    update();\n  });\n  on('click', (_s, e) => {\n    const targetEl = e.target;\n    const {\n      $el\n    } = swiper.pagination;\n\n    if (swiper.params.pagination.el && swiper.params.pagination.hideOnClick && $el && $el.length > 0 && !$(targetEl).hasClass(swiper.params.pagination.bulletClass)) {\n      if (swiper.navigation && (swiper.navigation.nextEl && targetEl === swiper.navigation.nextEl || swiper.navigation.prevEl && targetEl === swiper.navigation.prevEl)) return;\n      const isHidden = $el.hasClass(swiper.params.pagination.hiddenClass);\n\n      if (isHidden === true) {\n        emit('paginationShow');\n      } else {\n        emit('paginationHide');\n      }\n\n      $el.toggleClass(swiper.params.pagination.hiddenClass);\n    }\n  });\n\n  const enable = () => {\n    swiper.$el.removeClass(swiper.params.pagination.paginationDisabledClass);\n\n    if (swiper.pagination.$el) {\n      swiper.pagination.$el.removeClass(swiper.params.pagination.paginationDisabledClass);\n    }\n\n    init();\n    render();\n    update();\n  };\n\n  const disable = () => {\n    swiper.$el.addClass(swiper.params.pagination.paginationDisabledClass);\n\n    if (swiper.pagination.$el) {\n      swiper.pagination.$el.addClass(swiper.params.pagination.paginationDisabledClass);\n    }\n\n    destroy();\n  };\n\n  Object.assign(swiper.pagination, {\n    enable,\n    disable,\n    render,\n    update,\n    init,\n    destroy\n  });\n}"]},"metadata":{},"sourceType":"module"}